
-- Employee Table
CREATE TABLE EMP (
EMPNO INT PRIMARY KEY, -- Employee Number
ENAME VARCHAR(50), -- Employee Name
JOB VARCHAR(50), -- Job Title
MGR INT, -- Manager's Employee Number
HIREDATE DATE, -- Hire Date
SAL DECIMAL(10, 2), -- Salary
COMM DECIMAL(10, 2), -- Commission
DEPTNO INT, -- Department Number
CONSTRAINT FK_MGR FOREIGN KEY (MGR) REFERENCES EMP(EMPNO)
);

-- Department Table
CREATE TABLE DEPT (
DEPTNO INT PRIMARY KEY, -- Department Number
DNAME VARCHAR(50), -- Department Name
LOC VARCHAR(50) -- Location
);

-- Salary Grade
CREATE TABLE SALGRADE (
GRADE INT, -- Salary Grade
LOSAL DECIMAL(10, 2), -- Lowest Salary for Grade
HISAL DECIMAL(10, 2) -- Highest Salary for Grade
);


-- Job History 
CREATE TABLE JOBHISTORY (
EMPNO INT, -- Employee Number
JOB VARCHAR(50), -- Job Title
STARTDATE DATE, -- Start Date of Job
ENDDATE DATE, -- End Date of Job
DEPTNO INT, -- Department Number
CONSTRAINT FK_EMPNO FOREIGN KEY (EMPNO) REFERENCES EMP(EMPNO),
CONSTRAINT FK_DEPTNO FOREIGN KEY (DEPTNO) REFERENCES DEPT(DEPTNO)
);

INSERT INTO DEPT (DEPTNO, DNAME, LOC) VALUES
(10, 'ACCOUNTING', 'NEW YORK'),
(20, 'RESEARCH', 'DALLAS'),
(30, 'SALES', 'CHICAGO'),
(40, 'OPERATIONS', 'BOSTON');

INSERT INTO SALGRADE (GRADE, LOSAL, HISAL) VALUES
(1, 700, 1200),
(2, 1201, 1400),
(3, 1401, 2000),
(4, 2001, 3000),
(5, 3001, 9999);

-- Insert the top-level manager first
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES
(7839, 'KING', 'PRESIDENT', NULL, '1981-11-17', 5000, NULL, 10);

-- Now insert managers who reference KING
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES
(7566, 'JONES', 'MANAGER', 7839, '1981-04-02', 2975, NULL, 20),
(7698, 'BLAKE', 'MANAGER', 7839, '1981-05-01', 2850, NULL, 30),
(7782, 'CLARK', 'MANAGER', 7839, '1981-06-09', 2450, NULL, 10);

-- Now insert employees who reference managers
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES
(7369, 'SMITH', 'CLERK', 7698, '1980-12-17', 800, NULL, 20),
(7499, 'ALLEN', 'SALESMAN', 7698, '1981-02-20', 1600, 300, 30),
(7521, 'WARD', 'SALESMAN', 7698, '1981-02-22', 1250, 500, 30),
(7902, 'FORD', 'ANALYST', 7566, '1981-12-03', 3000, NULL, 20),
(7934, 'MILLER', 'CLERK', 7782, '1982-01-23', 1300, NULL, 10);

INSERT INTO JOBHISTORY (EMPNO, STARTDATE, ENDDATE, JOB, DEPTNO) VALUES
(7369, '2019-01-01', '2020-12-31', 'INTERN', 20),
(7369, '2021-01-01', '2022-12-31', 'ASSISTANT CLERK', 20),
(7499, '2018-03-01', '2019-12-31', 'JUNIOR SALESMAN', 30),
(7499, '2020-01-01', '2021-12-31', 'SALESMAN', 30),
(7521, '2017-05-15', '2019-05-15', 'TRAINEE', 30),
(7521, '2019-05-16', '2020-12-31', 'SALESMAN', 30),
(7566, '2015-04-02', '2018-12-31', 'ASSISTANT MANAGER', 20),
(7566, '2019-01-01', '2021-12-31', 'MANAGER', 20),
(7698, '2016-05-01', '2019-04-30', 'ASSISTANT MANAGER', 30),
(7698, '2019-05-01', '2022-12-31', 'MANAGER', 30),
(7782, '2016-06-09', '2018-06-08', 'SUPERVISOR', 10),
(7782, '2018-06-09', '2021-06-08', 'MANAGER', 10),
(7839, '2010-11-17', '2015-11-16', 'VICE PRESIDENT', 10),
(7839, '2015-11-17', '2023-12-31', 'PRESIDENT', 10),
(7902, '2017-12-03', '2019-12-02', 'SENIOR ANALYST', 20),
(7902, '2019-12-03', '2022-12-02', 'ANALYST', 20),
(7934, '2016-01-23', '2018-01-22', 'JUNIOR CLERK', 10),
(7934, '2018-01-23', '2020-01-22', 'CLERK', 10);


